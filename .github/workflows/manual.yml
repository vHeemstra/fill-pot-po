name: Manual run

on:
  workflow_dispatch:
    inputs:
      the_token:
        description: 'Token'
        required: true
        type: string
      logLevel:
        description: 'Log level'
        required: true
        default: 'warning'
        type: choice
        options:
        - info
        - warning
        - debug
      print_tags:
        description: 'True to print to STDOUT'
        required: true
        type: boolean
      tags:
        description: 'Test scenario tags'
        required: true
        type: string
      environment:
        description: 'Environment to run tests against'
        type: environment
        required: true

jobs:
  # print-tag:
  #   runs-on: ubuntu-latest
  #   if: ${{ github.event.inputs.print_tags == 'true' }}
  #   steps:
  #     - name: Print the input tag to STDOUT
  #       run: echo The tags are ${{ github.event.inputs.tags }}

  dump_contexts_to_log:
    runs-on: ubuntu-latest
    env:
      MANUAL_TOKEN: ${{ secrets.MANUAL_RUN_CI_TOKEN }}
    steps:
      - name: Dump context
        if: ${{ github.event.inputs.the_token == env.MANUAL_TOKEN }}
        run: |
          echo ''
          echo ''
          echo 'github:'
          echo '${{ toJSON(github) }}'
          echo ''
          echo ''
          echo 'env:'
          echo '${{ toJSON(env) }}'
          echo ''
          echo ''
          echo 'job:'
          echo '${{ toJSON(job) }}'
          echo ''
          echo ''
          echo 'steps:'
          echo '${{ toJSON(steps) }}'
          echo ''
          echo ''
          echo 'runner:'
          echo '${{ toJSON(runner) }}'
          echo ''
          echo ''
          echo 'strategy:'
          echo '${{ toJSON(strategy) }}'
          echo ''
          echo ''
          echo 'matrix:'
          echo '${{ toJSON(matrix) }}'
          echo ''
          echo ''
          echo 'needs:'
          echo '${{ toJSON(needs) }}'
          echo ''
          echo ''
          echo 'inputs:'
          echo '${{ toJSON(inputs) }}'
          echo ''
          echo ''
      # - name: Check out repository
      #   uses: actions/checkout@v3
      #   with:
      #     token: ${{ secrets.GH_PERSONAL_ACCESS_TOKEN }}

      # - name: Install Node.js
      #   uses: actions/setup-node@v3
      #   with:
      #     node-version: 16.x
      #     registry-url: https://registry.npmjs.org/

      # # - run: git config --global user.name 'github-actions'
      # # - run: git config --global user.email 'github-actions@github.com'
      # - run: git config --global user.name 'vHeemstra'
      # - run: git config --global user.email '17368112+vHeemstra@users.noreply.github.com'
      # - run: npm install
